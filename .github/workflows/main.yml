name: Keep Alive Multiple Sites

on:
  schedule:
    - cron: '*/5 * * * *'  # Every 6 minutes
  workflow_dispatch:       # Optional manual trigger

jobs:
  keepalive:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Multiple Sites (3x each)
        run: |
          # List of URLs to ping
          declare -a urls=(
            "https://tradingbot-382l.onrender.com" 
            "google.com" 
            "https://tradingbot-link.onrender.com" 
          )

          # Number of retries per URL
          retries=3
          delay=2  # seconds between retries

          # Loop through each URL
          for url in "${urls[@]}"; do
            echo "📡 Pinging $url..."
            for i in $(seq 1 $retries); do
              echo "🔁 Attempt $i for $url"
              curl -s --max-time 5 "$url" >/dev/null && { echo "✅ Success"; break; } || sleep $delay
            done
          done
